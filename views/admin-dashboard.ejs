<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-zinc-900 text-white min-h-screen flex">
    <!-- ✅ Sidebar -->
    <aside class="w-64 bg-zinc-800 flex flex-col p-6 space-y-6">
        <h2 class="text-2xl font-bold text-emerald-400">Admin Panel</h2>
        <p class="text-gray-400">Hello, Admin</p>

        <nav class="flex flex-col space-y-4">
            <a href="/admin" class="hover:text-emerald-400">Dashboard</a>
            <a href="/admin/posts/new" class="hover:text-emerald-400">Create Post</a>
            <a href="/logout" class="text-white bg-red-500 px-4 py-2 rounded-md">Logout</a>
        </nav>
    </aside>

    <!-- ✅ Main content -->
    <main class="flex-grow p-10 overflow-x-auto">
        <!-- ✅ Users Table -->
        <h1 class="text-3xl mb-6 text-emerald-400 font-bold">All Users</h1>
        <div class="overflow-x-auto">
            <table class="w-full mb-10 text-left border-collapse">
                <thead>
                    <tr class="text-gray-400 border-b border-gray-600">
                        <th class="p-2">Name</th>
                        <th class="p-2">Email</th>
                        <th class="p-2">Role</th>
                    </tr>
                </thead>
                <tbody>
                    <% users.forEach(user=> { %>
                        <tr class="border-b border-gray-700">
                            <td class="p-2">
                                <%= user.name %>
                            </td>
                            <td class="p-2">
                                <%= user.email %>
                            </td>
                            <td class="p-2 capitalize">
                                <%= user.role %>
                            </td>
                        </tr>
                        <% }); %>
                </tbody>
            </table>
        </div>

        <!-- ✅ Posts Grid -->
        <h1 class="text-3xl mb-6 text-emerald-400 font-bold">All Posts</h1>
        <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
            <% posts.forEach(post=> { %>
                <div class="bg-zinc-800 p-4 rounded shadow">
                    <h2 class="text-xl font-bold mb-2">
                        <%= post.title %>
                    </h2>

                    <% if (post.image) { %>
                        <img src="<%= post.image %>" alt="Post image" class="mb-2 rounded w-full h-40 object-cover" />
                        <% } %>

                            <p class="text-gray-400 mb-1">By: <%= post.user ? post.user.name : 'Unknown' %>
                            </p>
                            <p class="text-gray-300 text-sm mb-2">Created: <%= post.createdAt.toDateString() %>
                            </p>
                            <p class="text-gray-300 text-sm">
                                <%= post.content.substring(0, 120) %>...
                            </p>
                </div>
                <% }); %>
        </div>
    </main>
</body>

</html>